# 交换机和路由器互连

以 TP-LINK 2.5G 交换机为例：TL-SE2106/2206/2109/2420/2226。

## 连接交换机和电脑

首先让笔记本或者电脑直连交换机，如果笔记本没有网口，可以买一个USB转网口的转换器。

交换机的 IP 默认是 `10.18.18.251`。

## 修改电脑IP

将电脑的 IP 设置为和交换机同网段的静态 IP：
- 控制面板 > 网络和Internet > 网络连右键直连的以太网（ASIX AX88179 USB 3.0 to Gigabit Ethernet Adapter）
- 右键选择 属性 > Internet协议版本4(TCP/IPv4) > 属性 > 使用下面的 IP 地址：
  - IP 地址：`10.18.18.100`
  - 子网掩码：255.255.255.0
  - 默认网关：`10.18.18.1`
  - DNS 服务器：10.18.18.1, 10.18.18.2

## 设置交换机IP
打开浏览器，访问 http://10.18.18.251，应该就能看到交换机管理界面了。

设置用户名和密码，记住。

然后修改交换机的 IP：
- IP管理 > IP设置，将 DHCP 改为“禁用”
- 然后将 IP 地址改为和路由器同网段的静态 IP
  - 比如路由器的 LAN 口 IP 为 `192.168.31.x`
  - 则可以将交换机的 IP 改为 `192.168.31.10`
- IP管理 > 固定IP设置，改为“禁用”（尚不清楚这一步是否必要）

## 同步修改电脑IP

将电脑的 IP 设置为新的和交换机同网段的静态 IP：
- 控制面板 > 网络和Internet > 网络连右键直连的以太网（ASIX AX88179 USB 3.0 to Gigabit Ethernet Adapter）
- 右键选择 属性 > Internet协议版本4(TCP/IPv4) > 属性 > 使用下面的 IP 地址：
  - IP 地址：`192.168.31.200`
  - 子网掩码：255.255.255.0
  - 默认网关：`192.168.31.1` 
  - DNS 服务器：192.168.31.1, 192.168.31.2

打开浏览器，访问新的IP http://192.168.31.10，应该就能看到交换机管理界面了。

## 连接交换机和路由器

拔掉电脑和交换机的直连线，将交换机通过网线连接到路由器的 LAN 口。

这时可以看到路由器的设备列表里多了一个设备，且 IP 为 `192.168.31.10`。

这个设备就是交换机，表明 IP 修改成功了。

这时将其他设备（已经固定好 IP 为 `192.168.31.x` 的网段）连到交换机上，就可以正常访问网络了。

可以用下面的命令测试是否联网：

```sh
curl http://ifconfig.me
```